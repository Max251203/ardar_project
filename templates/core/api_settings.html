{% extends "base.html" %}
{% block title %}Настройки API{% endblock %}

{% block content %}
<div class="settings-container">
    <h1>Настройки API</h1>

    <!-- ArmTTS -->
    <div class="settings-card">
        <h2>API ключ для ArmTTS</h2>
        <p class="settings-description">Ключ для озвучивания армянских текстов.</p>
        <form method="post" class="settings-form">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.armtts_api_key.id_for_label }}">{{ form.armtts_api_key.label }}:</label>
                {{ form.armtts_api_key }}
                {% if form.armtts_api_key.errors %}
                <div class="field-errors">{{ form.armtts_api_key.errors }}</div>
                {% endif %}
            </div>
            <div class="form-actions">
                <button type="submit" name="save_armtts" class="btn-save">Сохранить ключ</button>
            </div>
        </form>
    </div>

    <!-- Agora -->
    <div class="settings-card">
        <h2>Настройки Agora для видеотрансляций</h2>
        <p class="settings-description">Ключи для проведения прямых эфиров и конференций.</p>
        <form method="post" class="settings-form">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ agora_form.agora_app_id.id_for_label }}">{{ agora_form.agora_app_id.label }}:</label>
                {{ agora_form.agora_app_id }}
                {% if agora_form.agora_app_id.errors %}<div class="field-errors">{{ agora_form.agora_app_id.errors }}</div>{% endif %}
            </div>
            <div class="form-group">
                <label for="{{ agora_form.agora_app_certificate.id_for_label }}">{{ agora_form.agora_app_certificate.label }}:</label>
                {{ agora_form.agora_app_certificate }}
                {% if agora_form.agora_app_certificate.errors %}<div class="field-errors">{{ agora_form.agora_app_certificate.errors }}</div>{% endif %}
            </div>
            <div class="form-group">
                <label for="{{ agora_form.agora_token_expire.id_for_label }}">{{ agora_form.agora_token_expire.label }}:</label>
                {{ agora_form.agora_token_expire }}
                {% if agora_form.agora_token_expire.errors %}<div class="field-errors">{{ agora_form.agora_token_expire.errors }}</div>{% endif %}
            </div>
            <div class="form-actions">
                <button type="submit" name="save_agora" class="btn-save">Сохранить настройки Agora</button>
            </div>
        </form>
    </div>

    <!-- FreeKassa -->
    <div class="settings-card">
        <h2>Настройки приема платежей (FreeKassa)</h2>
        <p class="settings-description">
            Средства принимаются на ваш мерчант-аккаунт FreeKassa. Вывод на карту/реквизиты настраивается в кабинете FreeKassa.
            На сайте можно хранить «реквизиты получателя» как справочную информацию.
        </p>
        <form method="post" class="settings-form">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ fk_form.merchant_id.id_for_label }}">{{ fk_form.merchant_id.label }}:</label>
                {{ fk_form.merchant_id }}
                {% if fk_form.merchant_id.errors %}<div class="field-errors">{{ fk_form.merchant_id.errors }}</div>{% endif %}
            </div>
            <div class="form-group">
                <label for="{{ fk_form.secret1.id_for_label }}">{{ fk_form.secret1.label }}:</label>
                {{ fk_form.secret1 }}
                {% if fk_form.secret1.errors %}<div class="field-errors">{{ fk_form.secret1.errors }}</div>{% endif %}
            </div>
            <div class="form-group">
                <label for="{{ fk_form.secret2.id_for_label }}">{{ fk_form.secret2.label }}:</label>
                {{ fk_form.secret2 }}
                {% if fk_form.secret2.errors %}<div class="field-errors">{{ fk_form.secret2.errors }}</div>{% endif %}
            </div>
            <div class="form-group">
                <label for="{{ fk_form.currency.id_for_label }}">{{ fk_form.currency.label }}:</label>
                {{ fk_form.currency }}
                {% if fk_form.currency.errors %}<div class="field-errors">{{ fk_form.currency.errors }}</div>{% endif %}
            </div>
            <div class="form-group">
                <label for="{{ fk_form.receiver_info.id_for_label }}">{{ fk_form.receiver_info.label }}:</label>
                {{ fk_form.receiver_info }}
                {% if fk_form.receiver_info.errors %}<div class="field-errors">{{ fk_form.receiver_info.errors }}</div>{% endif %}
            </div>
            <div class="form-actions">
                <button type="submit" name="save_freekassa" class="btn-save">Сохранить настройки FreeKassa</button>
            </div>
        </form>
    </div>
</div>

<style>
    .settings-container { max-width: 800px; margin: 0 auto; padding: 30px 0; }
    .settings-card { background: var(--card); border-radius: 10px; padding: 30px; margin-bottom: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    .settings-description { color: var(--text-light); margin-bottom: 20px; }
    .settings-form { margin-top: 20px; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
    .input-field { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 6px; font-size: 15px; background: var(--bg); color: var(--text); }
    .form-actions { margin-top: 30px; }
    .btn-save { padding: 12px 24px; background: var(--primary); color: #fff; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; }
</style>
{% endblock %}